"use strict";function getCookieValue(e){let t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]}$((function(){!function(e){const t=e("input#email"),s=e("input#name"),n=new URLSearchParams(location.search).get("email");""!==n&&(t.val(n),s.val(n.replace(/@[A-Z0-9.-]+\.[A-Z]{2,4}/gi,"").replace(/[!@#$%&+=â„–*:;,<>^'?\/\|\\]/g,"")),e("#password").focus())}(jQuery)})),$((function(){!function(){const e=$("#email"),t=$("#name"),s=$("#password"),n=$(".signup-form__submit"),i=$(".socials-items__item"),a=$(".message"),o=/^[a-z0-9_-{\.}!#$%&'"*+-/=?^_`{|}~]+@[a-z0-9]+\.[a-z0-9]{2,3}$/gi,l=$("#show-password");l.on("click",(function(){const e=$(this).find("img");"password"===s.attr("type")?(e.attr("src","static/img/png/eye-visible.png"),s.attr("type","text")):(e.attr("src","static/img/png/eye-invisible.png"),s.attr("type","password"))})),t.on("keyup",(function(){""!==$(this).val()&&0===e.val().search(o)&&""!==s.val()?(n.removeAttr("disabled"),n.removeClass("btn-common_disabled"),e.removeClass("invalid"),a.removeClass("visible")):(n.attr("disabled","1"),n.addClass("btn-common_disabled"))})),e.on("blur keyup",(function(){0===$(this).val().search(o)&&""!==t.val()&&""!==s.val()?($(this).removeClass("invalid"),a.removeClass("visible"),n.removeAttr("disabled"),n.removeClass("btn-common_disabled")):0===$(this).val().search(o)?($(this).removeClass("invalid"),a.removeClass("visible")):($(this).addClass("invalid"),a.addClass("visible"),n.attr("disabled","1"),n.addClass("btn-common_disabled")),""===$(this).val()&&($(this).removeClass("invalid"),a.removeClass("visible"))})),s.on("keyup",(function(){""!==$(this).val()&&""!==t.val()&&0===e.val().search(o)?(n.removeAttr("disabled"),n.removeClass("btn-common_disabled"),e.removeClass("invalid"),a.removeClass("visible")):(n.attr("disabled","1"),n.addClass("btn-common_disabled")),""!==$(this).val()?(l.removeAttr("disabled"),l.removeClass("disabled")):(l.attr("disabled","1"),l.addClass("disabled"),l.find("img").attr("src","static/img/png/eye-invisible.png"),$(this).attr("type","password"))})),n.on("click",(function(){$(this).text("Creating...")})),i.on("click",(function(){$(this).css("filter","brightness(.8)"),$(this).attr("disabled","disabled")}))}()}));let url="https://codegym.cc/api/1.0/rest/auth/signup/email?client=TILDA";function registerUser(e){e.preventDefault();const t=document.getElementById("name").value,s=document.getElementById("email").value,n=document.getElementById("password").value,i=document.getElementById("signup-form");let a=sessionStorage.getItem("xUtm");null!==a&&""!==a&&(url=url.concat("&x-utm=",a));let o=getCookieValue("_ga");null!==o&&""!==o&&(url=url.concat("&_gaCookie=",o));let l=getCookieValue("_fbp");null!==l&&""!==l&&(url=url.concat("&_fbpCookie=",l)),i.action=url;let c=JSON.stringify({displayName:t,email:s,password:n}),r=new XMLHttpRequest;r.open("POST",url,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-Interface-Language","ENGLISH"),r.responseType="json",r.onload=function(){let e=new Date;e.setDate(e.getDate()+3650),e=e.toUTCString(),document.cookie="JSESSIONID="+r.getResponseHeader("X-CG-Session").toLowerCase()+"; domain=codegym.cc; Max-Age=315360000; Expires="+e+"; Path=/; Secure; SameSite=None",window.location="https://codegym.cc/welcome/roles?landing=true"},r.onreadystatechange=function(){let e=r.response;null!==e.code&&"LOGIN_EMAIL_USED_BY_ANOTHER_USER"===e.code&&$((function(){const e=$("#email"),t=$("#password"),s=$(".signup-form__submit"),n=$(".email-already-exist"),i=$("#received-email"),a=$("#signup-error-close"),o=$("#signup-error-close-2");n.css({display:"flex"}),i.text(e.val()),a.click((function(){n.css({display:"none"})})),o.click((function(){n.css({display:"none"})})),n.click((function(){$(this).css({display:"none"})})),e.val(""),t.val(""),s.attr("disabled","1").addClass("btn-common_disabled").text("Create an account")}))},r.send(c)}function registerUserSocial(e){let t="https://codegym.cc/api/1.0/rest/auth/signup/social/";switch(e){case"button_id_sign_up_twitter":t+="twitter";break;case"button_id_sign_up_fb":t+="facebook";break;case"button_id_sign_up_linkedin":t+="linkedin";break;case"button_id_sign_up_github":t+="github";break;case"button_id_sign_up_google":t+="google"}let s=sessionStorage.getItem("xUtm");null!==s&&""!==s&&(t=t.concat("?x-utm=",s)),t.includes("?")?t+="&":t+="?",t+="client=TILDA&redirectUrl=",t+=encodeURIComponent("/welcome/roles?landing=true");let n=new XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("X-Interface-Language","ENGLISH"),n.send(null),n.onload=function(){let e=n.response,t=new Date;t.setDate(t.getDate()+3650),t=t.toUTCString();let s="JSESSIONID="+n.getResponseHeader("X-CG-Session").toLowerCase()+"; domain=codegym.cc; Max-Age=315360000; Expires="+t+"; Path=/; Secure; SameSite=None";document.cookie=s,window.location=e.substring(1,e.length-1)}}jQuery.event.special.touchstart={setup:function(e,t,s){this.addEventListener("touchstart",s,{passive:!t.includes("noPreventDefault")})}},jQuery.event.special.touchmove={setup:function(e,t,s){this.addEventListener("touchmove",s,{passive:!t.includes("noPreventDefault")})}},jQuery.event.special.wheel={setup:function(e,t,s){this.addEventListener("wheel",s,{passive:!t.includes("noPreventDefault")})}},jQuery.event.special.mousewheel={setup:function(e,t,s){this.addEventListener("mousewheel",s,{passive:!t.includes("noPreventDefault")})}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ251cC5qcyJdLCJuYW1lcyI6WyJnZXRDb29raWVWYWx1ZSIsIm5hbWUiLCJtYXRjaCIsImRvY3VtZW50IiwiY29va2llIiwiUmVnRXhwIiwiJCIsImVtYWlsIiwiZW1haWxGcm9tVXJsIiwiVVJMU2VhcmNoUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJnZXQiLCJ2YWwiLCJyZXBsYWNlIiwiZm9jdXMiLCJqUXVlcnkiLCJwYXNzd29yZCIsImZvcm1TdWJtaXQiLCJzb2NpYWxBdXRoQnV0dG9uIiwiZXJyb3JNZXNzYWdlIiwiZW1haWxQYXR0ZXJuIiwic2hvd1Bhc3N3b3JkQnRuIiwib24iLCJpbWciLCJ0aGlzIiwiZmluZCIsImF0dHIiLCJyZW1vdmVBdHRyIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInRleHQiLCJjc3MiLCJmb3JtRXZlbnRzTGlzdGVuZXIiLCJ1cmwiLCJyZWdpc3RlclVzZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJ1c2VybmFtZSIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJmb3JtIiwidXRtIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwiY29uY2F0IiwiZ2FDb29raWVWYWx1ZSIsImZicENvb2tpZVZhbHVlIiwiYWN0aW9uIiwianNvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJkaXNwbGF5TmFtZSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJyZXNwb25zZVR5cGUiLCJvbmxvYWQiLCJkYXRlIiwiRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwidG9VVENTdHJpbmciLCJnZXRSZXNwb25zZUhlYWRlciIsInRvTG93ZXJDYXNlIiwid2luZG93Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwieGhyUmVzcG9uY2UiLCJyZXNwb25zZSIsImNvZGUiLCJzdWJtaXQiLCJtb2RhbCIsInJlY2VpdmVkRW1haWwiLCJjbG9zZU1vZGFsXzEiLCJjbG9zZU1vZGFsXzIiLCJkaXNwbGF5IiwiY2xpY2siLCJzZW5kIiwicmVnaXN0ZXJVc2VyU29jaWFsIiwiYnV0dG9uSWQiLCJpbmNsdWRlcyIsImVuY29kZVVSSUNvbXBvbmVudCIsInNvY2lhbE5ldHdvcmtVcmwiLCJqU2Vzc2lvbklkIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiZXZlbnQiLCJzcGVjaWFsIiwidG91Y2hzdGFydCIsInNldHVwIiwiXyIsIm5zIiwiaGFuZGxlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhc3NpdmUiLCJ0b3VjaG1vdmUiLCJ3aGVlbCIsIm1vdXNld2hlZWwiXSwibWFwcGluZ3MiOiJBQUFBLGFBNkJBLFNBQVNBLGVBQWVDLEdBQ3RCLElBQUlDLEVBQVFDLFNBQVNDLE9BQU9GLE1BQU0sSUFBSUcsT0FBUSxRQUFVSixFQUFPLGFBRS9ELEdBQUlDLEVBQ0YsT0FBT0EsRUFBTSxHQS9CakJJLEdBQUUsWUFDQSxTQUFXQSxHQUNULE1BQU1DLEVBQVFELEVBQUUsZUFDVkwsRUFBT0ssRUFBRSxjQUNURSxFQWtCTyxJQUFJQyxnQkFBZ0JDLFNBQVNDLFFBQzVCQyxJQUFJLFNBakJHLEtBQWpCSixJQUNGRCxFQUFNTSxJQUFJTCxHQUVWUCxFQUFLWSxJQUFJTCxFQUNOTSxRQUFRLDZCQUErQixJQUN2Q0EsUUFBUSw4QkFBK0IsS0FHMUNSLEVBQUUsYUFBYVMsU0FibkIsQ0FrQkNDLFdBZ0JIVixHQUFFLFlBQ0EsV0FDRSxNQUFNQyxFQUFRRCxFQUFFLFVBQ1ZMLEVBQU9LLEVBQUUsU0FDVFcsRUFBV1gsRUFBRSxhQUNiWSxFQUFhWixFQUFFLHdCQUNmYSxFQUFtQmIsRUFBRSx3QkFDckJjLEVBQWVkLEVBQUUsWUFDakJlLEVBQWUsbUVBQ2ZDLEVBQWtCaEIsRUFBRSxrQkFFMUJnQixFQUFnQkMsR0FBRyxTQUFTLFdBQzFCLE1BQU1DLEVBQU1sQixFQUFFbUIsTUFBTUMsS0FBSyxPQUVLLGFBQTFCVCxFQUFTVSxLQUFLLFNBQ2hCSCxFQUFJRyxLQUFLLE1BQU8sa0NBQ2hCVixFQUFTVSxLQUFLLE9BQVEsVUFHdEJI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QUFRLENBQUVFLFNBQVVILEVBQUdYLFNBQVMsd0JBSW5FakUsT0FBT3VFLE1BQU1DLFFBQVFVLFdBQWEsQ0FDaENSLE1BQU8sU0FBVUMsRUFBR0MsRUFBSUMsR0FDdEJwRSxLQUFLcUUsaUJBQWlCLGFBQWNELEVBQVEsQ0FBRUUsU0FBVUgsRUFBR1gsU0FBUyIsImZpbGUiOiJzaWdudXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gIChmdW5jdGlvbiAoJCkge1xyXG4gICAgY29uc3QgZW1haWwgPSAkKFwiaW5wdXQjZW1haWxcIik7XHJcbiAgICBjb25zdCBuYW1lID0gJChcImlucHV0I25hbWVcIik7XHJcbiAgICBjb25zdCBlbWFpbEZyb21VcmwgPSBnZXRFbWFpbEZyb21VcmwoKTtcclxuICBcclxuICAgIGlmIChlbWFpbEZyb21VcmwgIT09IFwiXCIpIHtcclxuICAgICAgZW1haWwudmFsKGVtYWlsRnJvbVVybCk7XHJcbiAgICAgIFxyXG4gICAgICBuYW1lLnZhbChlbWFpbEZyb21VcmxcclxuICAgICAgICAucmVwbGFjZSgvQFtBLVowLTkuLV0rXFwuW0EtWl17Miw0fS9pZyAsIFwiXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1shQCMkJSYrPeKElio6Oyw8Pl4nP1xcL1xcfFxcXFxdL2csIFwiXCIpXHJcbiAgICAgICk7XHJcbiAgXHJcbiAgICAgICQoXCIjcGFzc3dvcmRcIikuZm9jdXMoKTtcclxuICAgIH1cclxuICAgIFxyXG4gIH0pXHJcbiAgXHJcbiAgKGpRdWVyeSk7XHJcbiAgXHJcbiAgZnVuY3Rpb24gZ2V0RW1haWxGcm9tVXJsKCkge1xyXG4gICAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKTtcclxuICAgIHJldHVybiBwYXJhbXMuZ2V0KFwiZW1haWxcIik7XHJcbiAgfVxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGdldENvb2tpZVZhbHVlKG5hbWUpIHtcclxuICBsZXQgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCggXCIoXnwgKVwiICsgbmFtZSArIFwiPShbXjtdKylcIiApKTtcclxuICBcclxuICBpZiAobWF0Y2gpIHtcclxuICAgIHJldHVybiBtYXRjaFsyXTtcclxuICB9XHJcbn1cclxuXHJcbiQoZnVuY3Rpb24oKXtcclxuICBmdW5jdGlvbiBmb3JtRXZlbnRzTGlzdGVuZXIoKSB7XHJcbiAgICBjb25zdCBlbWFpbCA9ICQoXCIjZW1haWxcIik7XHJcbiAgICBjb25zdCBuYW1lID0gJChcIiNuYW1lXCIpO1xyXG4gICAgY29uc3QgcGFzc3dvcmQgPSAkKFwiI3Bhc3N3b3JkXCIpO1xyXG4gICAgY29uc3QgZm9ybVN1Ym1pdCA9ICQoXCIuc2lnbnVwLWZvcm1fX3N1Ym1pdFwiKTtcclxuICAgIGNvbnN0IHNvY2lhbEF1dGhCdXR0b24gPSAkKFwiLnNvY2lhbHMtaXRlbXNfX2l0ZW1cIik7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAkKFwiLm1lc3NhZ2VcIik7XHJcbiAgICBjb25zdCBlbWFpbFBhdHRlcm4gPSAvXlthLXowLTlfLXtcXC59ISMkJSYnXCIqKy0vPT9eX2B7fH1+XStAW2EtejAtOV0rXFwuW2EtejAtOV17MiwzfSQvaWc7XHJcbiAgICBjb25zdCBzaG93UGFzc3dvcmRCdG4gPSAkKFwiI3Nob3ctcGFzc3dvcmRcIik7XHJcbiAgXHJcbiAgICBzaG93UGFzc3dvcmRCdG4ub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3QgaW1nID0gJCh0aGlzKS5maW5kKFwiaW1nXCIpO1xyXG4gIFxyXG4gICAgICBpZiAocGFzc3dvcmQuYXR0cihcInR5cGVcIikgPT09IFwicGFzc3dvcmRcIikge1xyXG4gICAgICAgIGltZy5hdHRyKFwic3JjXCIsIFwic3RhdGljL2ltZy9wbmcvZXllLXZpc2libGUucG5nXCIpXHJcbiAgICAgICAgcGFzc3dvcmQuYXR0cihcInR5cGVcIiwgXCJ0ZXh0XCIpO1xyXG4gIFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGltZy5hdHRyKFwic3JjXCIsIFwic3RhdGljL2ltZy9wbmcvZXllLWludmlzaWJsZS5wbmdcIilcclxuICAgICAgICBwYXNzd29yZC5hdHRyKFwidHlwZVwiLCBcInBhc3N3b3JkXCIpO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICB9KTtcclxuICBcclxuICAgIG5hbWUub24oXCJrZXl1cFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCQodGhpcykudmFsKCkgIT09IFwiXCIgJiZcclxuICAgICAgICBlbWFpbC52YWwoKS5zZWFyY2goZW1haWxQYXR0ZXJuKSA9PT0gMCAmJiBcclxuICAgICAgICBwYXNzd29yZC52YWwoKSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgZm9ybVN1Ym1pdC5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICBmb3JtU3VibWl0LnJlbW92ZUNsYXNzKFwiYnRuLWNvbW1vbl9kaXNhYmxlZFwiKTtcclxuICAgICAgICAgIGVtYWlsLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKTtcclxuICAgICAgICAgIGVycm9yTWVzc2FnZS5yZW1vdmVDbGFzcyhcInZpc2libGVcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZm9ybVN1Ym1pdC5hdHRyKFwiZGlzYWJsZWRcIiwgIFwiMVwiKTtcclxuICAgICAgICBmb3JtU3VibWl0LmFkZENsYXNzKFwiYnRuLWNvbW1vbl9kaXNhYmxlZFwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBlbWFpbC5vbihcImJsdXIga2V5dXBcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICgkKHRoaXMpLnZhbCgpLnNlYXJjaChlbWFpbFBhdHRlcm4pID09PSAwICYmXHJcbiAgICAgICAgbmFtZS52YWwoKSAhPT0gXCJcIiAmJlxyXG4gICAgICAgIHBhc3N3b3JkLnZhbCgpICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKTtcclxuICAgICAgICAgIGVycm9yTWVzc2FnZS5yZW1vdmVDbGFzcyhcInZpc2libGVcIik7XHJcbiAgICAgICAgICBmb3JtU3VibWl0LnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgIGZvcm1TdWJtaXQucmVtb3ZlQ2xhc3MoXCJidG4tY29tbW9uX2Rpc2FibGVkXCIpO1xyXG4gICAgICB9IGVsc2UgaWYgKCQodGhpcykudmFsKCkuc2VhcmNoKGVtYWlsUGF0dGVybikgPT09IDApIHtcclxuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKTtcclxuICAgICAgICBlcnJvck1lc3NhZ2UucmVtb3ZlQ2xhc3MoXCJ2aXNpYmxlXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJpbnZhbGlkXCIpO1xyXG4gICAgICAgIGVycm9yTWVzc2FnZS5hZGRDbGFzcyhcInZpc2libGVcIik7XHJcbiAgICAgICAgZm9ybVN1Ym1pdC5hdHRyKFwiZGlzYWJsZWRcIiwgXCIxXCIpO1xyXG4gICAgICAgIGZvcm1TdWJtaXQuYWRkQ2xhc3MoXCJidG4tY29tbW9uX2Rpc2FibGVkXCIpO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09PSBcIlwiKSB7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImludmFsaWRcIik7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlLnJlbW92ZUNsYXNzKFwidmlzaWJsZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBwYXNzd29yZC5vbihcImtleXVwXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPT0gXCJcIiAmJlxyXG4gICAgICAgIG5hbWUudmFsKCkgIT09IFwiXCIgJiYgXHJcbiAgICAgICAgZW1haWwudmFsKCkuc2VhcmNoKGVtYWlsUGF0dGVybikgPT09IDAgKSB7XHJcbiAgICAgICAgICBmb3JtU3VibWl0LnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgIGZvcm1TdWJtaXQucmVtb3ZlQ2xhc3MoXCJidG4tY29tbW9uX2Rpc2FibGVkXCIpO1xyXG4gICAgICAgICAgZW1haWwucmVtb3ZlQ2xhc3MoXCJpbnZhbGlkXCIpO1xyXG4gICAgICAgICAgZXJyb3JNZXNzYWdlLnJlbW92ZUNsYXNzKFwidmlzaWJsZVwiKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBmb3JtU3VibWl0LmF0dHIoXCJkaXNhYmxlZFwiLCAgXCIxXCIpO1xyXG4gICAgICAgIGZvcm1TdWJtaXQuYWRkQ2xhc3MoXCJidG4tY29tbW9uX2Rpc2FibGVkXCIpO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9PSBcIlwiKSB7XHJcbiAgICAgICAgc2hvd1Bhc3N3b3JkQnRuLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICBzaG93UGFzc3dvcmRCdG4ucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzaG93UGFzc3dvcmRCdG4uYXR0cihcImRpc2FibGVkXCIsIFwiMVwiKTtcclxuICAgICAgICBzaG93UGFzc3dvcmRCdG4uYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICBzaG93UGFzc3dvcmRCdG4uZmluZChcImltZ1wiKS5hdHRyKFwic3JjXCIsIFwic3RhdGljL2ltZy9wbmcvZXllLWludmlzaWJsZS5wbmdcIik7XHJcbiAgICAgICAgJCh0aGlzKS5hdHRyKFwidHlwZVwiLCBcInBhc3N3b3JkXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICBcclxuICAgIGZvcm1TdWJtaXQub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgJCh0aGlzKS50ZXh0KFwiQ3JlYXRpbmcuLi5cIik7XHJcbiAgICB9KTtcclxuICBcclxuICAgIHNvY2lhbEF1dGhCdXR0b24ub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgJCh0aGlzKS5jc3MoXCJmaWx0ZXJcIiwgXCJicmlnaHRuZXNzKC44KVwiKVxyXG4gICAgICAkKHRoaXMpLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIGZvcm1FdmVudHNMaXN0ZW5lcigpO1xyXG59KTtcclxuXHJcbmxldCB1cmwgPSBcImh0dHBzOi8vY29kZWd5bS5jYy9hcGkvMS4wL3Jlc3QvYXV0aC9zaWdudXAvZW1haWw/Y2xpZW50PVRJTERBXCI7XHJcblxyXG5mdW5jdGlvbiByZWdpc3RlclVzZXIoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBcclxuICBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmFtZVwiKS52YWx1ZTtcclxuICBjb25zdCBlbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW1haWxcIikudmFsdWU7XHJcbiAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3N3b3JkXCIpLnZhbHVlO1xyXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNpZ251cC1mb3JtXCIpO1xyXG4gIFxyXG4gIGxldCB1dG0gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwieFV0bVwiKTtcclxuICBpZiAodXRtICE9PSBudWxsICYmIHV0bSAhPT0gXCJcIikge1xyXG4gICAgdXJsID0gdXJsLmNvbmNhdChcIiZ4LXV0bT1cIiwgdXRtKTtcclxuICB9XHJcbiAgXHJcbiAgbGV0IGdhQ29va2llVmFsdWUgPSBnZXRDb29raWVWYWx1ZShcIl9nYVwiKTtcclxuICBpZiAoZ2FDb29raWVWYWx1ZSAhPT0gbnVsbCAmJiAgIGdhQ29va2llVmFsdWUgIT09IFwiXCIpIHtcclxuICAgIHVybCA9IHVybC5jb25jYXQoXCImX2dhQ29va2llPVwiLCBnYUNvb2tpZVZhbHVlKTtcclxuICB9XHJcbiAgXHJcbiAgbGV0IGZicENvb2tpZVZhbHVlID0gZ2V0Q29va2llVmFsdWUoXCJfZmJwXCIpO1xyXG4gIGlmIChmYnBDb29raWVWYWx1ZSAhPT0gbnVsbCAmJiBmYnBDb29raWVWYWx1ZSAhPT0gXCJcIikge1xyXG4gICAgdXJsID0gdXJsLmNvbmNhdChcIiZfZmJwQ29va2llPVwiLCBmYnBDb29raWVWYWx1ZSk7XHJcbiAgfVxyXG4gIFxyXG4gIGZvcm0uYWN0aW9uID0gdXJsO1xyXG4gIFxyXG4gIGxldCBqc29uID0gSlNPTi5zdHJpbmdpZnkgKHtcclxuICAgIGRpc3BsYXlOYW1lOiB1c2VybmFtZSxcclxuICAgIGVtYWlsOiBlbWFpbCxcclxuICAgIHBhc3N3b3JkOiBwYXNzd29yZFxyXG4gIH0pO1xyXG4gIFxyXG4gIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICB4aHIub3BlbihcIlBPU1RcIiwgdXJsLCB0cnVlKTtcclxuICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgLy8gVE9ETyA6IGNoYW5nZSBoZXJlXHJcbiAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJYLUludGVyZmFjZS1MYW5ndWFnZVwiLCBcIkVOR0xJU0hcIik7XHJcbiAgeGhyLnJlc3BvbnNlVHlwZSA9IFwianNvblwiO1xyXG4gIFxyXG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgIC8vIFRPRE8gOiBjaGFuZ2UgaGVyZVxyXG4gICAgbGV0IHVybCA9IFwiaHR0cHM6Ly9jb2RlZ3ltLmNjL3dlbGNvbWUvcm9sZXM/bGFuZGluZz10cnVlXCI7XHJcbiAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzNjUwKTtcclxuICAgIGRhdGUgPSBkYXRlLnRvVVRDU3RyaW5nKCk7XHJcbiAgICBcclxuICAgIGRvY3VtZW50LmNvb2tpZSA9IFwiSlNFU1NJT05JRD1cIlxyXG4gICAgICArIHhoci5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ0ctU2Vzc2lvblwiKS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICtcIjsgZG9tYWluPWNvZGVneW0uY2M7IE1heC1BZ2U9MzE1MzYwMDAwOyBFeHBpcmVzPVwiXHJcbiAgICAgICsgZGF0ZVxyXG4gICAgICArIFwiOyBQYXRoPS87IFNlY3VyZTsgU2FtZVNpdGU9Tm9uZVwiO1xyXG5cclxuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHVybDtcclxuXHJcbiAgfTtcclxuICBcclxuICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgbGV0IHhoclJlc3BvbmNlID0geGhyLnJlc3BvbnNlO1xyXG5cclxuICBpZiAoeGhyUmVzcG9uY2UuY29kZSAhPT0gbnVsbCAmJiB4aHJSZXNwb25jZS5jb2RlID09PSBcIkxPR0lOX0VNQUlMX1VTRURfQllfQU5PVEhFUl9VU0VSXCIpIHtcclxuICAgICQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbnN0IGVtYWlsID0gJChcIiNlbWFpbFwiKTtcclxuICAgICAgY29uc3QgcGFzc3dvcmQgPSAkKFwiI3Bhc3N3b3JkXCIpO1xyXG4gICAgICBjb25zdCBzdWJtaXQgPSAkKFwiLnNpZ251cC1mb3JtX19zdWJtaXRcIik7XHJcbiAgICAgIGNvbnN0IG1vZGFsID0gJChcIi5lbWFpbC1hbHJlYWR5LWV4aXN0XCIpO1xyXG4gICAgICBjb25zdCByZWNlaXZlZEVtYWlsID0gJChcIiNyZWNlaXZlZC1lbWFpbFwiKTtcclxuICAgICAgY29uc3QgY2xvc2VNb2RhbF8xID0gJChcIiNzaWdudXAtZXJyb3ItY2xvc2VcIik7XHJcbiAgICAgIGNvbnN0IGNsb3NlTW9kYWxfMiA9ICQoXCIjc2lnbnVwLWVycm9yLWNsb3NlLTJcIik7XHJcbiAgICAgIFxyXG4gICAgICBtb2RhbC5jc3Moe1wiZGlzcGxheVwiOiBcImZsZXhcIn0pO1xyXG4gICAgICByZWNlaXZlZEVtYWlsLnRleHQoZW1haWwudmFsKCkpO1xyXG4gICAgICBcclxuICAgICAgY2xvc2VNb2RhbF8xLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG1vZGFsLmNzcyh7XCJkaXNwbGF5XCI6IFwibm9uZVwifSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgY2xvc2VNb2RhbF8yLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG1vZGFsLmNzcyh7XCJkaXNwbGF5XCI6IFwibm9uZVwifSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgbW9kYWwuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jc3Moe1wiZGlzcGxheVwiOiBcIm5vbmVcIn0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGVtYWlsLnZhbChcIlwiKTtcclxuICAgICAgcGFzc3dvcmQudmFsKFwiXCIpO1xyXG4gICAgICBzdWJtaXQuYXR0cihcImRpc2FibGVkXCIsICBcIjFcIilcclxuICAgICAgICAuYWRkQ2xhc3MoXCJidG4tY29tbW9uX2Rpc2FibGVkXCIpXHJcbiAgICAgICAgLnRleHQoXCJDcmVhdGUgYW4gYWNjb3VudFwiKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4gIFxyXG4gIHhoci5zZW5kKGpzb24pO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gcmVnaXN0ZXJVc2VyU29jaWFsKGJ1dHRvbklkKSB7XHJcblxyXG4gIGxldCB1cmwgPSBcImh0dHBzOi8vY29kZWd5bS5jYy9hcGkvMS4wL3Jlc3QvYXV0aC9zaWdudXAvc29jaWFsL1wiO1xyXG4gIFxyXG4gIHN3aXRjaCAoYnV0dG9uSWQpIHtcclxuICAgIGNhc2UgXCJidXR0b25faWRfc2lnbl91cF90d2l0dGVyXCI6IFxyXG4gICAgICB1cmwgKz0gXCJ0d2l0dGVyXCI7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgICAgIFxyXG4gICAgY2FzZSBcImJ1dHRvbl9pZF9zaWduX3VwX2ZiXCI6IFxyXG4gICAgICB1cmwgKz0gXCJmYWNlYm9va1wiO1xyXG4gICAgICBicmVhaztcclxuICAgICAgICBcclxuICAgIGNhc2UgXCJidXR0b25faWRfc2lnbl91cF9saW5rZWRpblwiOiBcclxuICAgICAgdXJsICs9IFwibGlua2VkaW5cIjtcclxuICAgICAgYnJlYWs7XHJcbiAgICAgICAgXHJcbiAgICBjYXNlIFwiYnV0dG9uX2lkX3NpZ25fdXBfZ2l0aHViXCI6IFxyXG4gICAgICB1cmwgKz0gXCJnaXRodWJcIjtcclxuICAgICAgYnJlYWs7XHJcbiAgICAgICAgXHJcbiAgICBjYXNlIFwiYnV0dG9uX2lkX3NpZ25fdXBfZ29vZ2xlXCI6IFxyXG4gICAgICB1cmwgKz0gXCJnb29nbGVcIjtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG4gIFxyXG4gIGxldCB1dG0gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwieFV0bVwiKTtcclxuICBpZiAodXRtICE9PSBudWxsICYmIHV0bSAhPT0gXCJcIikge1xyXG4gICAgdXJsID0gdXJsLmNvbmNhdChcIj94LXV0bT1cIiwgdXRtKTtcclxuICB9XHJcbiAgXHJcbiAgaWYgKHVybC5pbmNsdWRlcyhcIj9cIikpIHtcclxuICAgIHVybCArPSBcIiZcIjtcclxuICB9IGVsc2Uge1xyXG4gICAgdXJsICs9IFwiP1wiO1xyXG4gIH1cclxuICBcclxuICB1cmwgKz0gXCJjbGllbnQ9VElMREEmcmVkaXJlY3RVcmw9XCI7XHJcbiAgdXJsICs9IGVuY29kZVVSSUNvbXBvbmVudChcIi93ZWxjb21lL3JvbGVzP2xhbmRpbmc9dHJ1ZVwiKTtcclxuXHJcbiAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xyXG4gIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAvLyBUT0RPIDogY2hhbmdlIGhlcmVcclxuICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIlgtSW50ZXJmYWNlLUxhbmd1YWdlXCIsIFwiRU5HTElTSFwiKTtcclxuICB4aHIuc2VuZChudWxsKTtcclxuICBcclxuICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgc29jaWFsTmV0d29ya1VybCA9IHhoci5yZXNwb25zZTtcclxuICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDM2NTApO1xyXG4gICAgZGF0ZSA9IGRhdGUudG9VVENTdHJpbmcoKTtcclxuXHJcbiAgICBsZXQgalNlc3Npb25JZCA9IFwiSlNFU1NJT05JRD1cIlxyXG4gICAgICArIHhoci5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ0ctU2Vzc2lvblwiKS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICsgXCI7IGRvbWFpbj1jb2RlZ3ltLmNjOyBNYXgtQWdlPTMxNTM2MDAwMDsgRXhwaXJlcz1cIlxyXG4gICAgICArIGRhdGVcclxuICAgICAgKyBcIjsgUGF0aD0vOyBTZWN1cmU7IFNhbWVTaXRlPU5vbmVcIjtcclxuXHJcbiAgICBkb2N1bWVudC5jb29raWUgPSBqU2Vzc2lvbklkO1xyXG4gICAgd2luZG93LmxvY2F0aW9uID0gc29jaWFsTmV0d29ya1VybC5zdWJzdHJpbmcoMSwgc29jaWFsTmV0d29ya1VybC5sZW5ndGggLSAxKTtcclxuICB9O1xyXG59XHJcblxyXG5qUXVlcnkuZXZlbnQuc3BlY2lhbC50b3VjaHN0YXJ0ID0ge1xyXG4gIHNldHVwOiBmdW5jdGlvbiggXywgbnMsIGhhbmRsZSApIHtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlLCB7IHBhc3NpdmU6ICFucy5pbmNsdWRlcyhcIm5vUHJldmVudERlZmF1bHRcIikgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxualF1ZXJ5LmV2ZW50LnNwZWNpYWwudG91Y2htb3ZlID0ge1xyXG4gIHNldHVwOiBmdW5jdGlvbiggXywgbnMsIGhhbmRsZSApIHtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBoYW5kbGUsIHsgcGFzc2l2ZTogIW5zLmluY2x1ZGVzKFwibm9QcmV2ZW50RGVmYXVsdFwiKSB9KTtcclxuICB9XHJcbn07XHJcblxyXG5qUXVlcnkuZXZlbnQuc3BlY2lhbC53aGVlbCA9IHtcclxuICBzZXR1cDogZnVuY3Rpb24oIF8sIG5zLCBoYW5kbGUgKSB7XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBoYW5kbGUsIHsgcGFzc2l2ZTogIW5zLmluY2x1ZGVzKFwibm9QcmV2ZW50RGVmYXVsdFwiKSB9KTtcclxuICB9XHJcbn07XHJcblxyXG5qUXVlcnkuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsID0ge1xyXG4gIHNldHVwOiBmdW5jdGlvbiggXywgbnMsIGhhbmRsZSApIHtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIiwgaGFuZGxlLCB7IHBhc3NpdmU6ICFucy5pbmNsdWRlcyhcIm5vUHJldmVudERlZmF1bHRcIikgfSk7XHJcbiAgfVxyXG59OyJdfQ==
